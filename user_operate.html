<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>用户身份调整</title>
    <script type="text/javascript" src="libs/jquery-3.2.1.min.js"></script>
    <script type="text/javascript">
    $(document).ready(
        function(){
            $('#guide').click(function () {
                $.ajax({
                    type: 'post',
                    xhrFields: {
                    withCredentials: true
                        },
                    url:'http://115.159.56.141/index.php/Admin/User/addAdministrator',
                    data:getId(),
                    dataType: 'json',
                    success:show11
                });
            });
        });
     function getId() {
         var id=document.getElementById('adjust').value;
         return {username:id};
     }
    function useradjust(data) {
        var num=0;
        for(num in data){
            num++;
        }
         for(var i=0;i<num;i++)
         {
             if(data.data[i].username==document.getElementById('adjust').value) data.data[i].is_admin=2;
         }
         if(data.status=='ok')
         alert("赋予管理员权限成功！");
        else alert('赋予管理员权限失败!');
    }
    $(document).ready(
        function(){
            $('#banzhu').click(function () {
                $.ajax({
                    type: 'post',
                    xhrFields: {
                        withCredentials: true
                    },
                    url:'http://115.159.56.141/index.php/Admin/User/addModerator',
                    data:getCid(),
                    dataType: 'json',
                    success:function (data) {
                        if(data.status=="ok")
                        alert("赋予版主权限成功！");
                        else alert('赋予版主权限失败！');
                    }
                });
            });
        });
    $(document).ready(
        function(){
            $('#lock').click(function () {
                $.ajax({
                    type: 'post',
                    xhrFields: {
                        withCredentials: true
                    },
                    url:'http://115.159.56.141/index.php/Admin/User/sealUser',
                    data:getId(),
                    dataType: 'json',
                  success:function (data) {
                        if(data.status=="ok")
                      alert('封号成功!');
                        else alert('封号失败!');
                  }
                });
            });
        });
    $(document).ready(
        function(){
            $('#unlock').click(function () {
                $.ajax({
                    type: 'get',
                    xhrFields: {
                        withCredentials: true
                    },
                    url:'http://115.159.56.141/index.php/Admin/User/cancelSeal',
                    data:getId(),
                    dataType: 'json',
                    success:function (data) {
                        if(data.status='ok')
                        alert("解封成功!");
                        else alert('解封失败!')
                    }
                });
            });
        });
     function getCid() {
         var id=document.getElementById('adjust').value;
         var name=document.getElementById('bankuainumber').value;
         return{
             username:id,
             cName:name
         }
     }
    </script>
</head>
<body>
    输入用户ID:<input type="text" id="adjust" /><br>
    是否赋予管理员权限<button id="guide">确认</button>
    <button id="lock">封号</button>
    <button id="unlock">解封</button>
    请输入板块名称<input type="text" id="bankuainumber" />
    <button id="banzhu">赋予版主权限</button>
</body>
</html>